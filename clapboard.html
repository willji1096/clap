<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Clap Board</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="styles.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
    /* 클랩 피드 관련 스타일 전부 삭제함 */
    .right-panel { width: 300px; background: #ffffff; padding: 36px 24px 32px 24px; border-left: 1px solid #f1f3f5; display: flex; flex-direction: column; gap: 20px; }
    .right-section { display: flex; flex-direction: column; padding-bottom: 20px; border-bottom: 1px solid #f1f3f5; }
    .right-section:last-child { border-bottom: none; padding-bottom: 0; }
    .right-value { font-size: 20px; font-weight: 800; color: #2563eb; }
    .right-list { display: flex; flex-direction: column; gap: 4px; }
    .right-list-item { font-size: 14px; color: #444; }
    @media (max-width: 900px) { .right-panel { display: none; } }
    .reward-header { width: 100%; max-width: 100%; margin-left: 0; box-sizing: border-box; }
    .reward-header-title { font-size: 24px; font-weight: 700; color: #222; margin-bottom: 42px; text-align: left; }
    .reward-tabs-wrap { position: relative; width: 100%; margin-top: 4px; margin-bottom: 42px; padding-bottom: 6px; }
    .reward-tabs { display: flex; justify-content: space-between; align-items: flex-end; position: relative; z-index: 2; padding-bottom: 6px; }
    .reward-tabs-left { display: flex; gap: 32px; }
    .reward-tab { background: none; border: none; font-size: 16px; color: #bbb; font-weight: 600; cursor: pointer; padding: 0 4px 0 0; outline: none; transition: color 0.2s; padding-bottom: 6px; }
    .reward-tab.active { color: #222; font-weight: 600; }
    .reward-tabs-active-underline { position: absolute; height: 2px; background: var(--primary-blue, #4f8cff); bottom: -6px; left: 0; z-index: 10; transition: all 0.2s; display: block; }
    .reward-tabs-underline { width: 100%; height: 2px; background: #F4F4F4; position: absolute; left: 0; bottom: 0; z-index: 1; }
    :root { --primary-blue: #4f8cff; }
    .reward-tab.active { color: var(--primary-blue); }
    .reward-tabs-active-underline { background: var(--primary-blue); }
    .right-profile-img-wrap { position: relative; display: inline-block; }
    .right-profile-emoji { position: absolute; right: 0; bottom: 0; font-size: 18px; background: #fff; border-radius: 50%; padding: 1px 2px; }
    /* 멤버 프로필 모달 스타일 */
    .member-profile-header {
      display: flex;
      align-items: center;
      gap: 16px;
    }
    .member-profile-img {
      width: 100px;
      height: 100px;
      object-fit: cover;
      border-radius: 8px;
    }
    .member-profile-info {
      display: flex;
      flex-direction: column;
      gap: 4px;
      flex: 1;
      min-width: 0;
    }
    .member-name {
      font-size: 20px;
      font-weight: 600;
      color: #222;
    }
    .member-role {
      font-size: 14px;
      color: #666;
    }
    .member-stats {
      display: flex;
      margin-top: 12px;
      padding: 8px 0;
      background: #f8f9fa;
      border-radius: 6px;
      width: 100%;
    }
    .member-stat-item {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      padding: 0 12px;
    }
    .member-stat-item:first-child {
      border-right: 1px solid #e5e7eb;
    }
    .stat-label {
      font-size: 12px;
      color: #666;
      margin-bottom: 2px;
    }
    .stat-value {
      font-size: 14px;
      font-weight: 600;
      color: #2563eb;
    }
    .history-title {
      font-size: 16px;
      font-weight: 600;
      color: #222;
      margin-bottom: 16px;
    }
    .history-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    .history-item {
      display: flex;
      flex-direction: column;
      gap: 8px;
      padding: 16px;
      background: #f8f9fa;
      border-radius: 8px;
    }
    .history-meta {
      display: flex;
      justify-content: space-between;
      font-size: 13px;
      color: #666;
    }
    .history-message {
      font-size: 14px;
      color: #444;
      line-height: 1.4;
    }
    .right-profile-img-wrap {
      cursor: pointer;
      transition: transform 0.2s;
    }
    .right-profile-img-wrap:hover {
      transform: scale(1.05);
    }
    /* 멤버 탭 스타일 */
    .member-tabs-wrap {
      border-bottom: 1px solid #eee;
    }
    .member-tabs {
      display: flex;
      gap: 24px;
    }
    .member-tab {
      background: none;
      border: none;
      font-size: 16px;
      color: #bbb;
      font-weight: 500;
      padding: 8px 4px;
      cursor: pointer;
      position: relative;
    }
    .member-tab.active {
      color: var(--primary-blue);
      font-weight: 600;
    }
    .member-tab.active:after {
      content: '';
      position: absolute;
      bottom: -1px;
      left: 0;
      width: 100%;
      height: 2px;
      background: var(--primary-blue);
    }
    .clap-modal-content {
      position: relative;
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.13);
      min-width: 340px;
      width: 640px;
      height: 700px;
      max-width: 96vw;
      padding: 24px;
      display: flex;
      flex-direction: column;
      z-index: 1;
    }
    
    .clap-modal-body {
      flex: 1;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      gap: 16px;
      min-height: 0;
    }

    .member-tab-content {
      flex: 1;
      overflow: auto;
      height: 500px;
      padding: 0;
    }

    .history-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
      padding: 16px 0;
      height: 100%;
      overflow-y: auto;
    }

    .history-item {
      display: flex;
      flex-direction: column;
      gap: 8px;
      padding: 12px;
      background: #f8f9fa;
      border-radius: 8px;
      flex-shrink: 0;
    }

    /* 네트워크 그래프 스타일 */
    .network-container {
      width: 100%;
      height: 500px;
      background: #fff;
      border-radius: 8px;
      overflow: hidden;
      position: relative;
    }

    .network-svg {
      width: 100%;
      height: 100%;
    }

    .network-node {
      cursor: pointer;
    }

    .network-node circle {
      fill: #fff;
      stroke-width: 3px;
    }

    .network-node image {
      pointer-events: none;
    }

    .network-node text {
      font-size: 12px;
      fill: #666;
      text-anchor: middle;
      pointer-events: none;
      font-weight: 500;
    }

    .network-link {
      stroke: #e5e7eb;
      stroke-width: 2;
      stroke-opacity: 0.8;
    }

    .network-stats {
      margin-top: 16px;
      margin-bottom: 8px;
      text-align: center;
    }

    .member-tabs-wrap {
      border-bottom: 1px solid #eee;
      margin: 24px 0 0 0;
      flex-shrink: 0;
    }

    .member-profile-header {
      display: flex;
      align-items: flex-start;
      gap: 16px;
    }

    /* 클랩 모달 스타일 오버라이드 */
    #clapModal .clap-modal-content {
      width: 360px;
    }

    .network-filter {
      padding: 0 0 16px 0;
    }

    .network-project-title {
      font-size: 13px;
      font-weight: 700;
      color: #666;
      margin-bottom: 6px;
    }

    .network-project-select {
      width: 100%;
      padding: 8px 12px;
      border: 1px solid #e5e7eb;
      border-radius: 6px;
      font-size: 14px;
      color: #333;
      background-color: #fff;
      cursor: pointer;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23666' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 8px center;
      background-size: 16px;
    }

    .network-project-select:focus {
      outline: none;
      border-color: #e5e7eb;
    }

    #network-tooltip {
      position: absolute;
      background-color: rgba(30, 41, 59, 0.9);
      color: #fff;
      padding: 6px 10px;
      border-radius: 4px;
      font-size: 12px;
      pointer-events: none;
      white-space: nowrap;
      z-index: 10;
      transition: opacity 0.2s;
    }
  </style>
</head>
<body>
  <div class="topbar">
    <div class="topbar-left">
      <span class="topbar-hamburger material-icons" id="hamburger-menu" style="display:none;">menu</span>
      <img src="assets/logo.png" alt="CLAP" class="topbar-logo" />
    </div>
    <div class="topbar-right">
        <span class="topbar-icon"><img src="assets/clap.svg" class="clap-svg-icon" alt="박수"></span>
        <span class="topbar-icon material-icons">school</span>
        <span class="topbar-icon"><span class="material-icons">notifications_none</span></span>

      <div class="topbar-profile">
        <img class="profile-circle" src="https://i.pravatar.cc/150?img=3" alt="프로필" />
        <div class="profile-info">
          <span class="profile-name">지길환</span>
          <span class="profile-email">willji@gilhwanji.com</span>
        </div>
        <span class="material-icons profile-arrow">expand_more</span>
      </div>
    </div>
  </div>
  <div class="layout">
    <aside class="sidebar">
      <nav class="menu">
        <div class="menu-group">
          <button class="menu-main">
            <span class="material-icons">emergency</span>
            신규 기능
            <span class="material-icons arrow">expand_more</span>
          </button>
          <div class="menu-sub">
            <a class="menu-sub-btn" href="culture.html">클랩 리워드 스토어</a>
            <a class="menu-sub-btn active" href="clapboard.html">클랩 보드</a>
            <a class="menu-sub-btn" href="#">인재이탈방지(관리자전용)</a>
          </div>
        </div>
        <div class="menu-group">
          <button class="menu-main">
            <span class="material-icons">track_changes</span>
            목표
            <span class="material-icons arrow">expand_more</span>
          </button>
          <div class="menu-sub hide">
            <a class="menu-sub-btn">목표 관리</a>
            <a class="menu-sub-btn">사이트 운영 관리</a>
          </div>
        </div>
        <div class="menu-group">
          <button class="menu-main">
            <span class="material-icons">sync_alt</span>
            1:1
            <span class="material-icons arrow">expand_more</span>
          </button>
          <div class="menu-sub hide">
            <button class="menu-sub-btn">멤버와의 1:1</button>
            <button class="menu-sub-btn">미팅 관리</button>
            <button class="menu-sub-btn">나의 1:1</button>
          </div>
        </div>
        <div class="menu-group">
          <button class="menu-main">
            <span class="material-icons">thumb_up_off_alt</span>
            피드백
            <span class="material-icons arrow">expand_more</span>
          </button>
          <div class="menu-sub hide">
            <button class="menu-sub-btn">나의 피드백</button>
            <button class="menu-sub-btn">피드백 관리</button>
          </div>
        </div>
        <div class="menu-group">
          <button class="menu-main">
            <span class="material-icons">edit_note</span>
            평가
            <span class="material-icons arrow">expand_more</span>
          </button>
          <div class="menu-sub hide">
            <button class="menu-sub-btn">나의 평가</button>
            <button class="menu-sub-btn">평가 관리</button>
          </div>
        </div>
        <div class="menu-group">
          <button class="menu-main">
            <span class="material-icons">insert_photo_outlined</span>
            성장 대시보드
            <span class="material-icons arrow">expand_more</span>
          </button>
          <div class="menu-sub hide">
            <button class="menu-sub-btn">나의 대시보드</button>
            <button class="menu-sub-btn">멤버 대시보드</button>
          </div>
        </div>
        <div class="menu-group">
          <button class="menu-main">
            <span class="material-icons">groups_2</span>
            조직도 & 구성원
          </button>
        </div>
        <div class="menu-group">
          <button class="menu-main">
            <span class="material-icons">tune</span>
            관리자 설정
            <span class="material-icons arrow">expand_more</span>
          </button>
          <div class="menu-sub hide">
            <button class="menu-sub-btn">권한 설정</button>
            <button class="menu-sub-btn">구독 관리</button>
          </div>
        </div>
      </nav>
    </aside>
    <main class="clapboard-main">
      <div class="reward-header">
        <div class="reward-header-title">클랩 보드</div>
        <div class="reward-tabs-wrap">
          <div class="reward-tabs">
            <div class="reward-tabs-left">
              <button class="reward-tab active" data-tab="received">받은 클랩</button>
              <button class="reward-tab" data-tab="sent">보낸 클랩</button>
            </div>
            <button class="clap-btn clap-btn-reply">클랩 한줄평 보내기</button>
            <div class="reward-tabs-active-underline"></div>
          </div>
          <div class="reward-tabs-underline"></div>
        </div>
      </div>
      <div class="clap-list" data-tab="received">
        <div class="clap-item">
          <div class="clap-profile right-profile-img-wrap" data-member-id="1" data-name="이수진" data-role="디자인팀 · 시니어" data-clap-count="15">
            <img src="https://randomuser.me/api/portraits/women/33.jpg" alt="프로필" class="right-profile-img">
            <span class="clap-icon">👏</span>
          </div>
          <div class="clap-info">
            <div class="clap-meta-row"><span class="clap-name">이수진</span><span class="clap-role">디자인팀 · 시니어</span><span class="clap-time">방금 전</span></div>
            <div class="clap-message">새로운 아이디어 정말 멋졌어요! 팀에 큰 영감을 주셨어요 🙌</div>
            <div class="clap-tags-row"><span class="clap-tag">#디자인</span><span class="clap-tag">#혁신</span></div>
            <div class="clap-actions-row"><button class="clap-btn clap-btn-reply">감사 답장</button></div>
          </div>
        </div>
        <div class="clap-item">
          <div class="clap-profile right-profile-img-wrap" data-member-id="2" data-name="김서연" data-role="개발팀 · 프론트엔드" data-clap-count="12">
            <img src="https://randomuser.me/api/portraits/women/2.jpg" alt="프로필" class="right-profile-img">
            <span class="clap-icon">👏</span>
          </div>
          <div class="clap-info">
            <div class="clap-meta-row"><span class="clap-name">김서연</span><span class="clap-role">개발팀 · 프론트엔드</span><span class="clap-time">5분 전</span></div>
            <div class="clap-message">버그 빠르게 잡아줘서 고마워요! 덕분에 일정 맞췄어요.</div>
            <div class="clap-tags-row"><span class="clap-tag">#개발</span><span class="clap-tag">#문제해결</span></div>
            <div class="clap-actions-row"><button class="clap-btn clap-btn-reply">감사 답장</button></div>
          </div>
        </div>
        <div class="clap-item">
          <div class="clap-profile right-profile-img-wrap" data-member-id="3" data-name="최민수" data-role="QA · 매니저" data-clap-count="18">
            <img src="https://randomuser.me/api/portraits/men/3.jpg" alt="프로필" class="right-profile-img">
            <span class="clap-icon">👏</span>
          </div>
          <div class="clap-info">
            <div class="clap-meta-row"><span class="clap-name">최민수</span><span class="clap-role">QA · 매니저</span><span class="clap-time">30분 전</span></div>
            <div class="clap-message">테스트 케이스 꼼꼼하게 챙겨줘서 프로젝트가 한층 안정적이 됐어요.</div>
            <div class="clap-tags-row"><span class="clap-tag">#QA</span><span class="clap-tag">#품질</span></div>
            <div class="clap-actions-row"><button class="clap-btn clap-btn-reply">감사 답장</button></div>
          </div>
        </div>
        <div class="clap-item">
          <div class="clap-profile right-profile-img-wrap" data-member-id="4" data-name="김하늘" data-role="마케팅팀 · 팀장" data-clap-count="14">
            <img src="https://randomuser.me/api/portraits/women/4.jpg" alt="프로필" class="right-profile-img">
            <span class="clap-icon">👏</span>
          </div>
          <div class="clap-info">
            <div class="clap-meta-row"><span class="clap-name">김하늘</span><span class="clap-role">마케팅팀 · 팀장</span><span class="clap-time">1시간 전</span></div>
            <div class="clap-message">캠페인 결과가 기대 이상이었어요! 정말 수고 많으셨습니다 🎉</div>
            <div class="clap-tags-row"><span class="clap-tag">#마케팅</span><span class="clap-tag">#성과</span></div>
            <div class="clap-actions-row"><button class="clap-btn clap-btn-reply">감사 답장</button></div>
          </div>
        </div>
        <div class="clap-item">
          <div class="clap-profile right-profile-img-wrap" data-member-id="5" data-name="이정훈" data-role="운영팀 · 주니어" data-clap-count="9">
            <img src="https://randomuser.me/api/portraits/men/5.jpg" alt="프로필" class="right-profile-img">
            <span class="clap-icon">👏</span>
          </div>
          <div class="clap-info">
            <div class="clap-meta-row"><span class="clap-name">이정훈</span><span class="clap-role">운영팀 · 주니어</span><span class="clap-time">2시간 전</span></div>
            <div class="clap-message">긴급 이슈 빠르게 처리해줘서 정말 고마워요!</div>
            <div class="clap-tags-row"><span class="clap-tag">#운영</span><span class="clap-tag">#긴급대응</span></div>
            <div class="clap-actions-row"><button class="clap-btn clap-btn-reply">감사 답장</button></div>
          </div>
        </div>
        <div class="clap-item">
          <div class="clap-profile right-profile-img-wrap" data-member-id="6" data-name="정유진" data-role="기획팀 · PM" data-clap-count="16">
            <img src="https://randomuser.me/api/portraits/women/6.jpg" alt="프로필" class="right-profile-img">
            <span class="clap-icon">👏</span>
          </div>
          <div class="clap-info">
            <div class="clap-meta-row"><span class="clap-name">정유진</span><span class="clap-role">기획팀 · PM</span><span class="clap-time">3시간 전</span></div>
            <div class="clap-message">새로운 플로우 제안 덕분에 프로젝트가 훨씬 매끄러워졌어요.</div>
            <div class="clap-tags-row"><span class="clap-tag">#기획</span><span class="clap-tag">#아이디어</span></div>
            <div class="clap-actions-row"><button class="clap-btn clap-btn-reply">감사 답장</button></div>
          </div>
        </div>
        <div class="clap-item">
          <div class="clap-profile right-profile-img-wrap" data-member-id="7" data-name="한지훈" data-role="개발팀 · 백엔드" data-clap-count="13">
            <img src="https://randomuser.me/api/portraits/men/7.jpg" alt="프로필" class="right-profile-img">
            <span class="clap-icon">👏</span>
          </div>
          <div class="clap-info">
            <div class="clap-meta-row"><span class="clap-name">한지훈</span><span class="clap-role">개발팀 · 백엔드</span><span class="clap-time">4시간 전</span></div>
            <div class="clap-message">API 문서화 꼼꼼하게 해줘서 협업이 쉬워졌어요.</div>
            <div class="clap-tags-row"><span class="clap-tag">#개발</span><span class="clap-tag">#협업</span></div>
            <div class="clap-actions-row"><button class="clap-btn clap-btn-reply">감사 답장</button></div>
          </div>
        </div>
        <div class="clap-item">
          <div class="clap-profile right-profile-img-wrap" data-member-id="8" data-name="오지은" data-role="QA · 주니어" data-clap-count="11">
            <img src="https://randomuser.me/api/portraits/women/8.jpg" alt="프로필" class="right-profile-img">
            <span class="clap-icon">👏</span>
          </div>
          <div class="clap-info">
            <div class="clap-meta-row"><span class="clap-name">오지은</span><span class="clap-role">QA · 주니어</span><span class="clap-time">5시간 전</span></div>
            <div class="clap-message">테스트 자동화 도입 제안 정말 좋았어요!</div>
            <div class="clap-tags-row"><span class="clap-tag">#QA</span><span class="clap-tag">#자동화</span></div>
            <div class="clap-actions-row"><button class="clap-btn clap-btn-reply">감사 답장</button></div>
          </div>
        </div>
        <div class="clap-item">
          <div class="clap-profile right-profile-img-wrap" data-member-id="9" data-name="김태현" data-role="운영팀 · 매니저" data-clap-count="17">
            <img src="https://randomuser.me/api/portraits/men/9.jpg" alt="프로필" class="right-profile-img">
            <span class="clap-icon">👏</span>
          </div>
          <div class="clap-info">
            <div class="clap-meta-row"><span class="clap-name">김태현</span><span class="clap-role">운영팀 · 매니저</span><span class="clap-time">6시간 전</span></div>
            <div class="clap-message">팀 분위기 좋게 만들어줘서 항상 고마워요!</div>
            <div class="clap-tags-row"><span class="clap-tag">#운영</span><span class="clap-tag">#분위기메이커</span></div>
            <div class="clap-actions-row"><button class="clap-btn clap-btn-reply">감사 답장</button></div>
          </div>
        </div>
        <div class="clap-item">
          <div class="clap-profile right-profile-img-wrap" data-member-id="10" data-name="박지수" data-role="마케팅팀 · 주니어" data-clap-count="10">
            <img src="https://randomuser.me/api/portraits/women/10.jpg" alt="프로필" class="right-profile-img">
            <span class="clap-icon">👏</span>
          </div>
          <div class="clap-info">
            <div class="clap-meta-row"><span class="clap-name">박지수</span><span class="clap-role">마케팅팀 · 주니어</span><span class="clap-time">7시간 전</span></div>
            <div class="clap-message">SNS 홍보 아이디어 덕분에 팔로워가 확 늘었어요!</div>
            <div class="clap-tags-row"><span class="clap-tag">#마케팅</span><span class="clap-tag">#SNS</span></div>
            <div class="clap-actions-row"><button class="clap-btn clap-btn-reply">감사 답장</button></div>
          </div>
        </div>
      </div>
      <div class="clap-list" data-tab="sent" style="display:none;">
        <div class="clap-item" data-name="이상훈" data-team="개발팀" data-keywords="#리뷰,#개발" data-message="코드 리뷰 꼼꼼하게 해줘서 고마워요!">
          <div class="clap-profile right-profile-img-wrap" data-member-id="11" data-name="이상훈" data-role="개발팀 · 시니어" data-clap-count="8">
            <img src="https://randomuser.me/api/portraits/men/11.jpg" alt="프로필" class="right-profile-img">
            <span class="clap-icon">👏</span>
          </div>
          <div class="clap-info">
            <div class="clap-meta-row"><span class="clap-name">이상훈</span><span class="clap-role">개발팀 · 시니어</span><span class="clap-time">1일 전</span></div>
            <div class="clap-message">코드 리뷰 꼼꼼하게 해줘서 고마워요!</div>
            <div class="clap-tags-row"><span class="clap-tag">#개발</span><span class="clap-tag">#리뷰</span></div>
            <div class="clap-actions-row">
              <button class="clap-btn clap-btn-edit">수정</button>
              <button class="clap-btn clap-btn-cancel">취소</button>
            </div>
          </div>
        </div>
        <div class="clap-item" data-name="최유리" data-team="디자인팀" data-keywords="#디자인,#프로토타입" data-message="프로토타입 빠르게 만들어줘서 일정이 단축됐어요!">
          <div class="clap-profile right-profile-img-wrap" data-member-id="12" data-name="최유리" data-role="디자인팀 · 주니어" data-clap-count="7">
            <img src="https://randomuser.me/api/portraits/women/12.jpg" alt="프로필" class="right-profile-img">
            <span class="clap-icon">👏</span>
          </div>
          <div class="clap-info">
            <div class="clap-meta-row"><span class="clap-name">최유리</span><span class="clap-role">디자인팀 · 주니어</span><span class="clap-time">1일 전</span></div>
            <div class="clap-message">프로토타입 빠르게 만들어줘서 일정이 단축됐어요!</div>
            <div class="clap-tags-row"><span class="clap-tag">#디자인</span><span class="clap-tag">#프로토타입</span></div>
            <div class="clap-actions-row">
              <button class="clap-btn clap-btn-edit">수정</button>
              <button class="clap-btn clap-btn-cancel">취소</button>
            </div>
          </div>
        </div>
        <div class="clap-item" data-name="정재훈" data-team="QA" data-keywords="#QA,#자동화" data-message="테스트 자동화 스크립트 공유해줘서 큰 도움 됐어요.">
          <div class="clap-profile right-profile-img-wrap" data-member-id="13" data-name="정재훈" data-role="QA · 시니어" data-clap-count="15">
            <img src="https://randomuser.me/api/portraits/men/13.jpg" alt="프로필" class="right-profile-img">
            <span class="clap-icon">👏</span>
          </div>
          <div class="clap-info">
            <div class="clap-meta-row"><span class="clap-name">정재훈</span><span class="clap-role">QA · 시니어</span><span class="clap-time">2일 전</span></div>
            <div class="clap-message">테스트 자동화 스크립트 공유해줘서 큰 도움 됐어요.</div>
            <div class="clap-tags-row"><span class="clap-tag">#QA</span><span class="clap-tag">#자동화</span></div>
            <div class="clap-actions-row">
              <button class="clap-btn clap-btn-edit">수정</button>
              <button class="clap-btn clap-btn-cancel">취소</button>
            </div>
          </div>
        </div>
        <div class="clap-item" data-name="김지연" data-team="마케팅팀" data-keywords="#마케팅,#아이디어" data-message="신규 캠페인 아이디어 정말 신선했어요!">
          <div class="clap-profile right-profile-img-wrap" data-member-id="14" data-name="김지연" data-role="마케팅팀 · 매니저" data-clap-count="19">
            <img src="https://randomuser.me/api/portraits/women/14.jpg" alt="프로필" class="right-profile-img">
            <span class="clap-icon">👏</span>
          </div>
          <div class="clap-info">
            <div class="clap-meta-row"><span class="clap-name">김지연</span><span class="clap-role">마케팅팀 · 매니저</span><span class="clap-time">2일 전</span></div>
            <div class="clap-message">신규 캠페인 아이디어 정말 신선했어요!</div>
            <div class="clap-tags-row"><span class="clap-tag">#마케팅</span><span class="clap-tag">#아이디어</span></div>
            <div class="clap-actions-row">
              <button class="clap-btn clap-btn-edit">수정</button>
              <button class="clap-btn clap-btn-cancel">취소</button>
            </div>
          </div>
        </div>
        <div class="clap-item">
          <div class="clap-profile right-profile-img-wrap" data-member-id="15" data-name="박성호" data-role="운영팀 · 주니어" data-clap-count="6">
            <img src="https://randomuser.me/api/portraits/men/15.jpg" alt="프로필" class="right-profile-img">
            <span class="clap-icon">👏</span>
          </div>
          <div class="clap-info">
            <div class="clap-meta-row"><span class="clap-name">박성호</span><span class="clap-role">운영팀 · 주니어</span><span class="clap-time">3일 전</span></div>
            <div class="clap-message">고객 문의 빠르게 처리해줘서 고마워요!</div>
            <div class="clap-tags-row"><span class="clap-tag">#운영</span><span class="clap-tag">#고객지원</span></div>
            <div class="clap-actions-row">
              <button class="clap-btn clap-btn-edit">수정</button>
              <button class="clap-btn clap-btn-cancel">취소</button>
            </div>
          </div>
        </div>
        <div class="clap-item">
          <div class="clap-profile right-profile-img-wrap" data-member-id="16" data-name="이은지" data-role="기획팀 · PM" data-clap-count="14">
            <img src="https://randomuser.me/api/portraits/women/16.jpg" alt="프로필" class="right-profile-img">
            <span class="clap-icon">👏</span>
          </div>
          <div class="clap-info">
            <div class="clap-meta-row"><span class="clap-name">이은지</span><span class="clap-role">기획팀 · PM</span><span class="clap-time">3일 전</span></div>
            <div class="clap-message">프로젝트 일정 관리 정말 잘해주셨어요!</div>
            <div class="clap-tags-row"><span class="clap-tag">#기획</span><span class="clap-tag">#일정관리</span></div>
            <div class="clap-actions-row">
              <button class="clap-btn clap-btn-edit">수정</button>
              <button class="clap-btn clap-btn-cancel">취소</button>
            </div>
          </div>
        </div>
        <div class="clap-item">
          <div class="clap-profile"><img src="https://randomuser.me/api/portraits/men/17.jpg" alt="프로필"><span class="clap-icon">👏</span></div>
          <div class="clap-info">
            <div class="clap-meta-row"><span class="clap-name">최현우</span><span class="clap-role">개발팀 · 주니어</span><span class="clap-time">4일 전</span></div>
            <div class="clap-message">코드 리팩토링 제안 덕분에 성능이 좋아졌어요.</div>
            <div class="clap-tags-row"><span class="clap-tag">#개발</span><span class="clap-tag">#리팩토링</span></div>
            <div class="clap-actions-row">
              <button class="clap-btn clap-btn-edit">수정</button>
              <button class="clap-btn clap-btn-cancel">취소</button>
            </div>
          </div>
        </div>
        <div class="clap-item">
          <div class="clap-profile"><img src="https://randomuser.me/api/portraits/women/18.jpg" alt="프로필"><span class="clap-icon">👏</span></div>
          <div class="clap-info">
            <div class="clap-meta-row"><span class="clap-name">박소영</span><span class="clap-role">QA · 주니어</span><span class="clap-time">5일 전</span></div>
            <div class="clap-message">테스트 문서화 정말 꼼꼼하게 해줘서 고마워요!</div>
            <div class="clap-tags-row"><span class="clap-tag">#QA</span><span class="clap-tag">#문서화</span></div>
            <div class="clap-actions-row">
              <button class="clap-btn clap-btn-edit">수정</button>
              <button class="clap-btn clap-btn-cancel">취소</button>
            </div>
          </div>
        </div>
        <div class="clap-item">
          <div class="clap-profile"><img src="https://randomuser.me/api/portraits/men/19.jpg" alt="프로필"><span class="clap-icon">👏</span></div>
          <div class="clap-info">
            <div class="clap-meta-row"><span class="clap-name">이재훈</span><span class="clap-role">운영팀 · 매니저</span><span class="clap-time">5일 전</span></div>
            <div class="clap-message">팀원들 챙겨줘서 항상 고마워요!</div>
            <div class="clap-tags-row"><span class="clap-tag">#운영</span><span class="clap-tag">#팀워크</span></div>
            <div class="clap-actions-row">
              <button class="clap-btn clap-btn-edit">수정</button>
              <button class="clap-btn clap-btn-cancel">취소</button>
            </div>
          </div>
        </div>
        <div class="clap-item">
          <div class="clap-profile"><img src="https://randomuser.me/api/portraits/women/20.jpg" alt="프로필"><span class="clap-icon">👏</span></div>
          <div class="clap-info">
            <div class="clap-meta-row"><span class="clap-name">정다은</span><span class="clap-role">마케팅팀 · 시니어</span><span class="clap-time">6일 전</span></div>
            <div class="clap-message">SNS 홍보 전략 정말 인상적이었어요!</div>
            <div class="clap-tags-row"><span class="clap-tag">#마케팅</span><span class="clap-tag">#SNS</span></div>
            <div class="clap-actions-row">
              <button class="clap-btn clap-btn-edit">수정</button>
              <button class="clap-btn clap-btn-cancel">취소</button>
            </div>
          </div>
        </div>
      </div>
    </main>
    <aside class="right-panel">
      <div class="right-section">
        <div class="right-label">이번주 클랩 한줄평 리더</div>
        <div class="right-profile-row">
          <div class="right-profile-img-wrap" data-member-id="5" data-name="김서연" data-role="디자인팀 · 시니어" data-clap-count="23">
            <img src="https://i.pravatar.cc/100?img=5" class="right-profile-img"><span class="right-profile-emoji">👏</span>
          </div>
          <div class="right-profile-img-wrap" data-member-id="6" data-name="이준호" data-role="개발팀 · 프론트엔드" data-clap-count="21">
            <img src="https://i.pravatar.cc/100?img=6" class="right-profile-img"><span class="right-profile-emoji">👏</span>
          </div>
          <div class="right-profile-img-wrap" data-member-id="7" data-name="박민지" data-role="기획팀 · PM" data-clap-count="19">
            <img src="https://i.pravatar.cc/100?img=7" class="right-profile-img"><span class="right-profile-emoji">👏</span>
          </div>
          <div class="right-profile-img-wrap" data-member-id="10" data-name="정태우" data-role="개발팀 · 백엔드" data-clap-count="18">
            <img src="https://i.pravatar.cc/100?img=10" class="right-profile-img"><span class="right-profile-emoji">👏</span>
          </div>
          <div class="right-profile-img-wrap" data-member-id="11" data-name="최유진" data-role="마케팅팀 · 매니저" data-clap-count="17">
            <img src="https://i.pravatar.cc/100?img=11" class="right-profile-img"><span class="right-profile-emoji">👏</span>
          </div>
          <div class="right-profile-img-wrap" data-member-id="12" data-name="한승민" data-role="운영팀 · 시니어" data-clap-count="16">
            <img src="https://i.pravatar.cc/100?img=12" class="right-profile-img"><span class="right-profile-emoji">👏</span>
          </div>
        </div>
      </div>
      <div class="right-section">
        <div class="right-label">클랩 한줄평이 필요한 동료</div>
        <div class="right-profile-row">
          <div class="right-profile-img-wrap" data-member-id="8" data-name="임수진" data-role="디자인팀 · 주니어" data-clap-count="0">
            <img src="https://i.pravatar.cc/100?img=8" class="right-profile-img"><span class="right-profile-emoji">💬</span>
          </div>
          <div class="right-profile-img-wrap" data-member-id="9" data-name="강동현" data-role="개발팀 · 인턴" data-clap-count="1">
            <img src="https://i.pravatar.cc/100?img=9" class="right-profile-img"><span class="right-profile-emoji">💬</span>
          </div>
          <div class="right-profile-img-wrap" data-member-id="13" data-name="송지원" data-role="기획팀 · 주니어" data-clap-count="2">
            <img src="https://i.pravatar.cc/100?img=13" class="right-profile-img"><span class="right-profile-emoji">💬</span>
          </div>
          <div class="right-profile-img-wrap" data-member-id="14" data-name="오현우" data-role="QA · 시니어" data-clap-count="1">
            <img src="https://i.pravatar.cc/100?img=14" class="right-profile-img"><span class="right-profile-emoji">💬</span>
          </div>
          <div class="right-profile-img-wrap" data-member-id="15" data-name="윤서아" data-role="마케팅팀 · 주니어" data-clap-count="0">
            <img src="https://i.pravatar.cc/100?img=15" class="right-profile-img"><span class="right-profile-emoji">💬</span>
          </div>
          <div class="right-profile-img-wrap" data-member-id="16" data-name="장민석" data-role="운영팀 · 매니저" data-clap-count="2">
            <img src="https://i.pravatar.cc/100?img=16" class="right-profile-img"><span class="right-profile-emoji">💬</span>
          </div>
        </div>
      </div>
      <div class="right-section">
        <div class="right-label">이번주 활동 추이</div>
        <canvas id="weeklyClapChart" width="260" height="180" style="max-width:100%; height:140px;"></canvas>
      </div>
      <div class="right-section">
        <div class="right-label">오늘 받은 클랩 한줄평</div>
        <div class="right-value">2</div>
      </div>
      <div class="right-section">
        <div class="right-label">이번주 미션</div>
        <div class="right-mission-row">
          <span class="right-mission-title">3명에게 클랩 한줄평 보내기</span>
          <span class="right-mission-percent">2/3명 완료</span>
        </div>
        <div class="right-mission-progress">
          <div class="right-mission-bar">
            <div class="right-mission-bar-fill" style="width: 66%"></div>
          </div>
        </div>
      </div>
    </aside>
  </div>
  <footer class="footer">
    © 2024 Clap. All rights reserved.
  </footer>
  <script src="scripts.js"></script>
  <script>
  function updateUnderline() {
    const activeTab = document.querySelector('.reward-tab.active');
    const underline = document.querySelector('.reward-tabs-active-underline');
    const tabsContainer = document.querySelector('.reward-tabs');
    if (!activeTab || !underline || !tabsContainer) return;
    const rect = activeTab.getBoundingClientRect();
    const parentRect = tabsContainer.getBoundingClientRect();
    underline.style.width = rect.width + 'px';
    underline.style.left = (rect.left - parentRect.left) + 'px';
    underline.style.display = 'block';
  }
  window.addEventListener('DOMContentLoaded', function() {
    updateUnderline && updateUnderline();
  });
  const tabBtns = document.querySelectorAll('.reward-tab');
  const clapLists = document.querySelectorAll('.clap-list');
  tabBtns.forEach(btn => {
    btn.addEventListener('click', function() {
      tabBtns.forEach(b => b.classList.remove('active'));
      this.classList.add('active');
      const tab = this.getAttribute('data-tab');
      clapLists.forEach(list => {
        if (list.getAttribute('data-tab') === tab) {
          list.style.removeProperty('display');
        } else {
          list.style.display = 'none';
        }
      });
      setTimeout(() => { updateUnderline && updateUnderline(); }, 120);
    });
  });
  window.addEventListener('resize', function() {
    updateUnderline && updateUnderline();
  });
  </script>
  <!-- Clap 작성 모달 -->
  <div id="clapModal" class="clap-modal" style="display:none;">
    <div class="clap-modal-overlay"></div>
    <div class="clap-modal-content">
      <div class="clap-modal-header">
        <span class="clap-modal-icon">👏</span>
        <span class="clap-modal-title">클랩 한줄평 작성</span>
        <button class="clap-modal-close" title="닫기">×</button>
      </div>
      <div class="clap-modal-body">
        <label class="clap-modal-label">받는 사람</label>
        <select class="clap-modal-input"><option>이소정</option></select>
        <label class="clap-modal-label">팀/프로젝트</label>
        <select class="clap-modal-input"><option>디자인팀</option></select>
        <label class="clap-modal-label">키워드</label>
        <input class="clap-modal-input clap-modal-keyword" placeholder="키워드 입력, 쉼표로 구분" />
        <label class="clap-modal-label">후기</label>
        <textarea class="clap-modal-textarea" rows="5" placeholder="후기를 작성해 주세요..."></textarea>
      </div>
      <div class="clap-modal-footer">
        <button class="clap-modal-btn clap-modal-cancel">취소</button>
        <button class="clap-modal-btn clap-modal-submit">보내기</button>
      </div>
    </div>
  </div>
  <!-- 멤버 프로필 모달 -->
  <div id="memberModal" class="clap-modal" style="display:none;">
    <div class="clap-modal-overlay"></div>
    <div class="clap-modal-content">
      <div class="clap-modal-header">
        <span class="clap-modal-title">멤버 프로필</span>
        <button class="clap-modal-close" title="닫기">×</button>
      </div>
      <div class="clap-modal-body">
        <div class="member-profile-header">
          <img class="member-profile-img" src="" alt="프로필">
          <div class="member-profile-info">
            <div class="member-name"></div>
            <div class="member-role"></div>
            <div class="member-stats">
              <div class="member-stat-item">
                <div class="stat-label">총 받은 수</div>
                <div class="stat-value clap-count">15</div>
              </div>
              <div class="member-stat-item">
                <div class="stat-label">총 보낸 수</div>
                <div class="stat-value">12</div>
              </div>
            </div>
          </div>
        </div>

        <div class="member-tabs-wrap">
          <div class="member-tabs">
            <button class="member-tab active" data-tab="received">받은 클랩 한줄평</button>
            <button class="member-tab" data-tab="sent">보낸 클랩 한줄평</button>
            <button class="member-tab" data-tab="network">네트워크</button>
          </div>
        </div>

        <div class="member-tab-content" data-tab="received" style="display: block;">
          <div class="history-list">
            <div class="history-item">
              <div class="history-meta">
                <span>김태현 · 운영팀 · 매니저</span>
                <span>방금 전</span>
              </div>
              <div class="history-message">디자인 시스템 개선 제안 감사합니다!</div>
            </div>
            <div class="history-item">
              <div class="history-meta">
                <span>박민지 · 기획팀 · PM</span>
                <span>3일 전</span>
              </div>
              <div class="history-message">UI 개선 아이디어 정말 좋았어요.</div>
            </div>
            <div class="history-item">
              <div class="history-meta">
                <span>정태우 · 개발팀 · 백엔드</span>
                <span>4일 전</span>
              </div>
              <div class="history-message">협업하기 정말 좋은 동료예요.</div>
            </div>
            <div class="history-item">
              <div class="history-meta">
                <span>한승민 · 운영팀 · 시니어</span>
                <span>5일 전</span>
              </div>
              <div class="history-message">새로운 기능 제안 감사합니다.</div>
            </div>
            <div class="history-item">
              <div class="history-meta">
                <span>임수진 · 디자인팀 · 주니어</span>
                <span>1주일 전</span>
              </div>
              <div class="history-message">멘토링 감사합니다!</div>
            </div>
          </div>
        </div>

        <div class="member-tab-content" data-tab="sent" style="display: none;">
          <div class="history-list">
            <div class="history-item">
              <div class="history-meta">
                <span>이준호 · 개발팀 · 백엔드</span>
                <span>방금 전</span>
              </div>
              <div class="history-message">코드 리뷰 피드백 감사합니다!</div>
            </div>
            <div class="history-item">
              <div class="history-meta">
                <span>김서연 · 디자인팀 · 시니어</span>
                <span>2일 전</span>
              </div>
              <div class="history-message">디자인 시스템 제안이 인상적이었어요.</div>
            </div>
            <div class="history-item">
              <div class="history-meta">
                <span>박지원 · 기획팀 · PM</span>
                <span>3일 전</span>
              </div>
              <div class="history-message">프로젝트 일정 관리 감사합니다.</div>
            </div>
            <div class="history-item">
              <div class="history-meta">
                <span>최민수 · QA · 매니저</span>
                <span>4일 전</span>
              </div>
              <div class="history-message">테스트 자동화 도입 제안 좋았어요!</div>
            </div>
            <div class="history-item">
              <div class="history-meta">
                <span>정유진 · 마케팅팀 · 주니어</span>
                <span>1주일 전</span>
              </div>
              <div class="history-message">캠페인 아이디어 감사합니다.</div>
            </div>
          </div>
        </div>

        <div class="member-tab-content" data-tab="network" style="display: none;">
          <div class="network-filter">
            <div class="network-project-title">참여 프로젝트 조회</div>
            <select class="network-project-select">
              <!-- 프로젝트 목록은 동적으로 채워집니다. -->
            </select>
          </div>
          <div class="network-container">
            <svg class="network-svg"></svg>
            <div id="network-tooltip" style="display: none;"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script>
    // 멤버 프로필 탭 전환
    document.addEventListener('DOMContentLoaded', function() {
      const memberTabs = document.querySelectorAll('.member-tab');
      const memberContents = document.querySelectorAll('.member-tab-content');

      memberTabs.forEach(tab => {
        tab.addEventListener('click', () => {
          const targetTab = tab.getAttribute('data-tab');

          // 탭 활성화
          memberTabs.forEach(t => t.classList.remove('active'));
          tab.classList.add('active');

          // 컨텐츠 전환
          memberContents.forEach(content => {
            if (content.getAttribute('data-tab') === targetTab) {
              content.style.display = 'block';
              if (targetTab === 'network') {
                const currentMemberId = document.getElementById('memberModal').dataset.currentMemberId;
                if(currentMemberId) {
                  populateProjectFilter(currentMemberId);
                  const selectedProject = document.querySelector('.network-project-select').value;
                  initNetworkGraph(selectedProject, currentMemberId);
                }
              }
            } else {
              content.style.display = 'none';
            }
          });
        });
      });
    });

    // 중앙 관리형 멤버 데이터
    const members = {
      1: { id: 1, name: "이수진", avatar: "https://randomuser.me/api/portraits/women/33.jpg", team: "디자인팀", role: "시니어 디자이너" },
      2: { id: 2, name: "김서연", avatar: "https://randomuser.me/api/portraits/women/2.jpg", team: "디자인팀", role: "UI/UX 디자이너" },
      3: { id: 3, name: "박민지", avatar: "https://randomuser.me/api/portraits/women/3.jpg", team: "기획팀", role: "프로덕트 매니저" },
      4: { id: 4, name: "오지은", avatar: "https://randomuser.me/api/portraits/women/11.jpg", team: "디자인팀", role: "주니어 디자이너" },
      5: { id: 5, name: "정태우", avatar: "https://randomuser.me/api/portraits/men/4.jpg", team: "개발팀", role: "백엔드 개발자" },
      6: { id: 6, name: "이상훈", avatar: "https://randomuser.me/api/portraits/men/14.jpg", team: "개발팀", role: "프론트엔드 개발자" },
      7: { id: 7, name: "강현우", avatar: "https://randomuser.me/api/portraits/men/8.jpg", team: "개발팀", role: "백엔드 개발자" },
      8: { id: 8, name: "김태현", avatar: "https://randomuser.me/api/portraits/men/12.jpg", team: "개발팀", role: "데브옵스 엔지니어" },
      9: { id: 9, name: "최유진", avatar: "https://randomuser.me/api/portraits/women/5.jpg", team: "마케팅팀", role: "콘텐츠 마케터" },
      10: { id: 10, name: "임준호", avatar: "https://randomuser.me/api/portraits/men/10.jpg", team: "마케팅팀", role: "퍼포먼스 마케터" },
      11: { id: 11, name: "윤서아", avatar: "https://randomuser.me/api/portraits/women/9.jpg", team: "기획팀", role: "서비스 기획자" },
      12: { id: 12, name: "최유리", avatar: "https://randomuser.me/api/portraits/women/15.jpg", team: "마케팅팀", role: "그로스 해커" },
      13: { id: 13, name: "한승민", avatar: "https://randomuser.me/api/portraits/men/6.jpg", team: "운영팀", role: "운영 매니저" },
      14: { id: 14, name: "박지수", avatar: "https://randomuser.me/api/portraits/women/13.jpg", team: "기획팀", role: "주니어 기획자" },
      15: { id: 15, name: "이정훈", avatar: "https://randomuser.me/api/portraits/men/1.jpg", team: "개발팀", role: "풀스택 개발자" }
    };

    // 프로젝트별 네트워크 데이터 (ID 기반)
    const projectNetworks = {
      all: {
        name: "전체 프로젝트",
        nodes: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15],
        links: [
          { source: 2, target: 4, value: 8 }, { source: 2, target: 3, value: 7 }, { source: 2, target: 1, value: 8 },
          { source: 4, target: 3, value: 7 }, { source: 4, target: 1, value: 8 }, { source: 3, target: 1, value: 7 },
          { source: 5, target: 6, value: 8 }, { source: 5, target: 7, value: 7 }, { source: 5, target: 8, value: 8 },
          { source: 6, target: 7, value: 8 }, { source: 6, target: 8, value: 7 }, { source: 7, target: 8, value: 8 },
          { source: 9, target: 10, value: 8 }, { source: 9, target: 11, value: 7 }, { source: 9, target: 12, value: 8 },
          { source: 10, target: 11, value: 7 }, { source: 10, target: 12, value: 8 }, { source: 11, target: 12, value: 7 },
          { source: 13, target: 14, value: 8 }, { source: 13, target: 15, value: 7 }, { source: 14, target: 15, value: 8 },
          { source: 2, target: 5, value: 5 }, { source: 5, target: 9, value: 5 }, { source: 9, target: 13, value: 5 },
          { source: 13, target: 2, value: 5 }, { source: 3, target: 7, value: 4 }, { source: 8, target: 11, value: 4 },
          { source: 1, target: 15, value: 4 }, { source: 6, target: 12, value: 4 },
          { source: 1, target: 2, value: 8 }, { source: 1, target: 4, value: 8 }, { source: 1, target: 3, value: 7 }
        ]
      },
      project1: {
        name: "리워드 스토어 개편",
        nodes: [1, 2, 4, 15, 7, 3, 14],
        links: [
          { source: 2, target: 4, value: 8 }, { source: 2, target: 1, value: 7 }, { source: 4, target: 1, value: 8 },
          { source: 15, target: 7, value: 8 }, { source: 3, target: 14, value: 8 },
          { source: 2, target: 15, value: 6 }, { source: 4, target: 7, value: 6 },
          { source: 1, target: 3, value: 6 }, { source: 15, target: 3, value: 6 }, { source: 7, target: 14, value: 6 },
          { source: 1, target: 2, value: 8 }, { source: 1, target: 4, value: 8 }, { source: 1, target: 3, value: 7 }
        ]
      },
      project2: {
        name: "모바일 앱 런칭",
        nodes: [5, 6, 8, 9, 10, 11, 13, 15],
        links: [
          { source: 5, target: 6, value: 8 }, { source: 5, target: 8, value: 7 }, { source: 6, target: 8, value: 8 },
          { source: 5, target: 15, value: 7 }, { source: 6, target: 15, value: 8 }, { source: 8, target: 15, value: 7 },
          { source: 9, target: 10, value: 8 }, { source: 5, target: 11, value: 6 }, { source: 6, target: 9, value: 6 },
          { source: 8, target: 13, value: 6 }, { source: 9, target: 11, value: 6 }, { source: 10, target: 13, value: 6 }
        ]
      },
      project3: {
        name: "신규 평가 시스템",
        nodes: [3, 11, 5, 6, 9, 13, 14],
        links: [
          { source: 3, target: 11, value: 8 }, { source: 3, target: 14, value: 7 }, { source: 11, target: 14, value: 8 },
          { source: 5, target: 6, value: 8 }, { source: 3, target: 5, value: 6 }, { source: 11, target: 6, value: 6 },
          { source: 5, target: 9, value: 6 }, { source: 6, target: 13, value: 6 }, { source: 9, target: 14, value: 6 }
        ]
      },
      project4: {
        name: "클랩 보드 개발",
        nodes: [15, 7, 2, 4, 3, 12, 13],
        links: [
          { source: 15, target: 7, value: 8 }, { source: 2, target: 4, value: 8 },
          { source: 15, target: 2, value: 6 }, { source: 7, target: 4, value: 6 },
          { source: 2, target: 3, value: 6 }, { source: 4, target: 12, value: 6 }, { source: 3, target: 13, value: 6 }
        ]
      }
    };

    function populateProjectFilter(memberId) {
      const select = document.querySelector('.network-project-select');
      select.innerHTML = '';

      const memberIdNum = parseInt(memberId, 10);
      let firstProject = 'all';

      const memberProjects = Object.keys(projectNetworks).filter(projectId => 
        projectId !== 'all' && projectNetworks[projectId].nodes.includes(memberIdNum)
      );

      // '전체 프로젝트' 옵션 추가
      const allOption = document.createElement('option');
      allOption.value = 'all';
      allOption.textContent = projectNetworks.all.name;
      select.appendChild(allOption);

      // 멤버가 속한 프로젝트들 추가
      memberProjects.forEach(projectId => {
        const option = document.createElement('option');
        option.value = projectId;
        option.textContent = projectNetworks[projectId].name;
        select.appendChild(option);
      });
      
      // 기본 선택값을 멤버가 속한 첫 번째 특정 프로젝트로 설정
      if (memberProjects.length > 0) {
        firstProject = memberProjects[0];
      }
      select.value = firstProject;
    }

    // 네트워크 그래프 초기화 함수 수정
    function initNetworkGraph(projectId, currentMemberId) {
      d3.select('.network-svg').selectAll('*').remove();

      const network = projectNetworks[projectId];
      if (!network) return;
      
      const currentMemberIdNum = parseInt(currentMemberId, 10);

      const nodeData = network.nodes.map(id => members[id]);
      const linkData = network.links.map(l => ({...l}));

      const container = document.querySelector('.network-container');
      const width = container.offsetWidth;
      const height = container.offsetHeight;

      const svg = d3.select('.network-svg')
        .attr('width', width)
        .attr('height', height)
        .on('click', () => { // Hide tooltip when clicking background
          d3.select('#network-tooltip').style('display', 'none');
          activeTooltipNode = null;
        });

      const zoom = d3.zoom().scaleExtent([0.5, 2]).on('zoom', (event) => g.attr('transform', event.transform));
      svg.call(zoom);

      const g = svg.append('g').attr('transform', `translate(${width/2},${height/2})`);

      const simulation = d3.forceSimulation(nodeData)
        .force('link', d3.forceLink(linkData).id(d => d.id).distance(d => 120 - d.value * 5))
        .force('charge', d3.forceManyBody().strength(-800))
        .force('x', d3.forceX().strength(0.08))
        .force('y', d3.forceY().strength(0.08))
        .force('collision', d3.forceCollide().radius(50));

      const link = g.append('g').selectAll('line').data(linkData).join('line')
        .attr('class', 'network-link').attr('stroke-width', d => Math.sqrt(d.value));

      const node = g.append('g').selectAll('.network-node').data(nodeData).join('g')
        .attr('class', 'network-node')
        .call(d3.drag().on('start', dragstarted).on('drag', dragged).on('end', dragended))
        .on('click', handleNodeClick);

      node.append('circle').attr('r', 24).attr('fill', '#fff')
        .attr('stroke', d => {
          if (d.id === currentMemberIdNum) return '#f59e0b'; // 현재 사용자 강조 색상
          switch(d.team) {
            case '개발팀': return '#4f8cff';
            case '디자인팀': return '#a3e635';
            case '기획팀': return '#fb923c';
            case '마케팅팀': return '#e879f9';
            case '운영팀': return '#22d3ee';
            default: return '#94a3b8';
          }
        })
        .attr('stroke-width', 3);

      node.append('image').attr('x', -22).attr('y', -22).attr('width', 44).attr('height', 44)
        .attr('clip-path', 'circle(22px)').attr('href', d => d.avatar).attr('preserveAspectRatio', 'xMidYMid slice');

      node.append('text').attr('dy', 40).text(d => d.name).attr('text-anchor', 'middle')
        .attr('fill', '#666').attr('font-size', '12px').attr('font-weight', '500');

      simulation.on('tick', () => {
        link.attr('x1', d => d.source.x).attr('y1', d => d.source.y)
            .attr('x2', d => d.target.x).attr('y2', d => d.target.y);
        node.attr('transform', d => `translate(${d.x},${d.y})`);
      });

      function dragstarted(event, d) {
        if (!event.active) simulation.alphaTarget(0.3).restart();
        d.fx = d.x; d.fy = d.y;
      }
      function dragged(event, d) { d.fx = event.x; d.fy = event.y; }
      function dragended(event, d) {
        if (!event.active) simulation.alphaTarget(0);
        d.fx = null; d.fy = null;
      }

      simulation.alpha(1).restart();
    }

    let activeTooltipNode = null;
    function handleNodeClick(event, d) {
        event.stopPropagation();
        const tooltip = d3.select('#network-tooltip');

        if (activeTooltipNode === this) {
            tooltip.style('display', 'none');
            activeTooltipNode = null;
            return;
        }
        
        activeTooltipNode = this;
        
        const container = document.querySelector('.network-container');
        const [x, y] = d3.pointer(event, container);

        tooltip.html(`<strong>${d.team}</strong> &middot; ${d.role}`)
            .style('display', 'block')
            .style('left', `${x + 15}px`)
            .style('top', `${y}px`);
    }

    // 프로젝트 선택 이벤트 리스너 수정
    document.querySelector('.network-project-select').addEventListener('change', (e) => {
      const currentMemberId = document.getElementById('memberModal').dataset.currentMemberId;
      if(currentMemberId) {
        initNetworkGraph(e.target.value, currentMemberId);
      }
    });

    // 네트워크 탭 클릭 시 그래프 초기화 로직은 member-tab click listener 안으로 이동
  </script>
</body>
</html>
